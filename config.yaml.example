# S3 Sync Configuration Example
# Copy this file to config.yaml and fill in your environment-specific values

# AWS Configuration
aws:
  region: eu-north-1

# Phase 1: Network and S3 Interface Endpoint
phase1:
  vpc:
    vpc_id: vpc-xxxxx  # Your VPC ID
    subnet_ids:
      - subnet-xxxxx   # Private subnet 1 (AZ-a)
      - subnet-xxxxx   # Private subnet 2 (AZ-b)

  # JD Cloud CIDR blocks for security group rules
  jd_cloud_cidr:
    - 10.0.0.0/16      # Replace with actual JD Cloud CIDR

  # Transit Gateway
  tgw:
    tgw_id: tgw-xxxxx  # Your TGW ID

  # S3 Standard Bucket
  standard_bucket:
    name: my-standard-bucket
    incoming_prefix: incoming/
    auto_create: false  # Set to true to auto-create bucket, false if already exists

  # Route 53 Resolver Inbound Endpoint
  resolver:
    name: jdcloud-s3-resolver

# Phase 2: Lambda Sync to S3 Express One Zone
phase2:
  # S3 Express One Zone Directory Bucket
  express_bucket:
    name: my-express-bucket--eun1-az1--x-s3  # Express bucket naming format: name--azid--x-s3
    ingest_prefix: ingest/
    # Note: Express bucket must be created manually or already exist

  # Lambda Function
  lambda:
    function_name: s3-to-express-sync
    timeout: 300
    memory_size: 512
    runtime: python3.12

  # Lambda VPC Configuration (should be same VPC as Express endpoint)
  lambda_vpc:
    subnet_ids:
      - subnet-xxxxx   # Private subnet in same AZ as Express endpoint

# IAM Role Names
iam:
  lambda_role_name: S3ExpressSyncLambdaRole
